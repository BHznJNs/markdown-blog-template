import e from"../build.config.js";let s=null;async function t(e){return s&&s.abort(),s=new AbortController,await fetch(e,{signal:s.signal}).then((async e=>{const t=await e.json();return s=null,t})).catch((s=>(console.log("JSON request error: "+e),console.error(s),null)))}const i=e.language,a=["zh","en"];const n=function(e){for(const[s,t]of Object.entries(a))if(e===t)return(...e)=>e[s];return console.warn("Unexpected language: "+e),(...e)=>e[1]}(i);class l extends Error{constructor(e){super(),this.message=`"${e}" is a abstract method that should be overrided.`}}class r{static loadErrMsg=n("加载失败","load error");static renderErrMsg=n("渲染失败","render error");name="";_module=null;_targetElList=null;async importModule(e){throw new l("importModule")}async beforeRender(e){}loadCondition(e){throw new l("loadCondition")}renderItem(e){throw new l("renderItem")}renderAll(e){for(const e of this._targetElList())try{this.renderItem(e)}catch(s){this.renderErrResolver(s,e)}}loadErrResolver(e){console.error(e),this._targetElList().forEach((e=>e.textContent=this.name+" "+r.loadErrMsg))}renderErrResolver(e,s){console.error(e),s.textContent=this.name+" "+r.renderErrMsg}async render(e){if(this.loadCondition(e)){if(null===this._module)try{this._module=await this.importModule(e)}catch(e){return void this.loadErrResolver(e)}await this.beforeRender(e),this.renderAll(e)}}}function g(e){return new Promise(((s,t)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=e,document.head.appendChild(i),i.onload=s,i.onerror=t}))}const h=new class extends r{name="Highlight.js";_targetElList=()=>document.querySelectorAll("pre.code-block code");async#e(e=[]){const s=e.filter((e=>!this._module.getLanguage(e))).map((e=>function(e){switch(e){case"../../libs/highlight-es/languages/1c.js":return import("./libs/highlight-es/languages/1c.js");case"../../libs/highlight-es/languages/abnf.js":return import("./libs/highlight-es/languages/abnf.js");case"../../libs/highlight-es/languages/accesslog.js":return import("./libs/highlight-es/languages/accesslog.js");case"../../libs/highlight-es/languages/actionscript.js":return import("./libs/highlight-es/languages/actionscript.js");case"../../libs/highlight-es/languages/ada.js":return import("./libs/highlight-es/languages/ada.js");case"../../libs/highlight-es/languages/angelscript.js":return import("./libs/highlight-es/languages/angelscript.js");case"../../libs/highlight-es/languages/apache.js":return import("./libs/highlight-es/languages/apache.js");case"../../libs/highlight-es/languages/applescript.js":return import("./libs/highlight-es/languages/applescript.js");case"../../libs/highlight-es/languages/arcade.js":return import("./libs/highlight-es/languages/arcade.js");case"../../libs/highlight-es/languages/arduino.js":return import("./libs/highlight-es/languages/arduino.js");case"../../libs/highlight-es/languages/armasm.js":return import("./libs/highlight-es/languages/armasm.js");case"../../libs/highlight-es/languages/asciidoc.js":return import("./libs/highlight-es/languages/asciidoc.js");case"../../libs/highlight-es/languages/aspectj.js":return import("./libs/highlight-es/languages/aspectj.js");case"../../libs/highlight-es/languages/autohotkey.js":return import("./libs/highlight-es/languages/autohotkey.js");case"../../libs/highlight-es/languages/autoit.js":return import("./libs/highlight-es/languages/autoit.js");case"../../libs/highlight-es/languages/avrasm.js":return import("./libs/highlight-es/languages/avrasm.js");case"../../libs/highlight-es/languages/awk.js":return import("./libs/highlight-es/languages/awk.js");case"../../libs/highlight-es/languages/axapta.js":return import("./libs/highlight-es/languages/axapta.js");case"../../libs/highlight-es/languages/bash.js":return import("./libs/highlight-es/languages/bash.js");case"../../libs/highlight-es/languages/basic.js":return import("./libs/highlight-es/languages/basic.js");case"../../libs/highlight-es/languages/bnf.js":return import("./libs/highlight-es/languages/bnf.js");case"../../libs/highlight-es/languages/brainfuck.js":return import("./libs/highlight-es/languages/brainfuck.js");case"../../libs/highlight-es/languages/c.js":return import("./libs/highlight-es/languages/c.js");case"../../libs/highlight-es/languages/cal.js":return import("./libs/highlight-es/languages/cal.js");case"../../libs/highlight-es/languages/capnproto.js":return import("./libs/highlight-es/languages/capnproto.js");case"../../libs/highlight-es/languages/ceylon.js":return import("./libs/highlight-es/languages/ceylon.js");case"../../libs/highlight-es/languages/clean.js":return import("./libs/highlight-es/languages/clean.js");case"../../libs/highlight-es/languages/clojure-repl.js":return import("./libs/highlight-es/languages/clojure-repl.js");case"../../libs/highlight-es/languages/clojure.js":return import("./libs/highlight-es/languages/clojure.js");case"../../libs/highlight-es/languages/cmake.js":return import("./libs/highlight-es/languages/cmake.js");case"../../libs/highlight-es/languages/coffeescript.js":return import("./libs/highlight-es/languages/coffeescript.js");case"../../libs/highlight-es/languages/coq.js":return import("./libs/highlight-es/languages/coq.js");case"../../libs/highlight-es/languages/cos.js":return import("./libs/highlight-es/languages/cos.js");case"../../libs/highlight-es/languages/cpp.js":return import("./libs/highlight-es/languages/cpp.js");case"../../libs/highlight-es/languages/crmsh.js":return import("./libs/highlight-es/languages/crmsh.js");case"../../libs/highlight-es/languages/crystal.js":return import("./libs/highlight-es/languages/crystal.js");case"../../libs/highlight-es/languages/csharp.js":return import("./libs/highlight-es/languages/csharp.js");case"../../libs/highlight-es/languages/csp.js":return import("./libs/highlight-es/languages/csp.js");case"../../libs/highlight-es/languages/css.js":return import("./libs/highlight-es/languages/css.js");case"../../libs/highlight-es/languages/d.js":return import("./libs/highlight-es/languages/d.js");case"../../libs/highlight-es/languages/dart.js":return import("./libs/highlight-es/languages/dart.js");case"../../libs/highlight-es/languages/delphi.js":return import("./libs/highlight-es/languages/delphi.js");case"../../libs/highlight-es/languages/diff.js":return import("./libs/highlight-es/languages/diff.js");case"../../libs/highlight-es/languages/django.js":return import("./libs/highlight-es/languages/django.js");case"../../libs/highlight-es/languages/dns.js":return import("./libs/highlight-es/languages/dns.js");case"../../libs/highlight-es/languages/dockerfile.js":return import("./libs/highlight-es/languages/dockerfile.js");case"../../libs/highlight-es/languages/dos.js":return import("./libs/highlight-es/languages/dos.js");case"../../libs/highlight-es/languages/dsconfig.js":return import("./libs/highlight-es/languages/dsconfig.js");case"../../libs/highlight-es/languages/dts.js":return import("./libs/highlight-es/languages/dts.js");case"../../libs/highlight-es/languages/dust.js":return import("./libs/highlight-es/languages/dust.js");case"../../libs/highlight-es/languages/ebnf.js":return import("./libs/highlight-es/languages/ebnf.js");case"../../libs/highlight-es/languages/elixir.js":return import("./libs/highlight-es/languages/elixir.js");case"../../libs/highlight-es/languages/elm.js":return import("./libs/highlight-es/languages/elm.js");case"../../libs/highlight-es/languages/erb.js":return import("./libs/highlight-es/languages/erb.js");case"../../libs/highlight-es/languages/erlang-repl.js":return import("./libs/highlight-es/languages/erlang-repl.js");case"../../libs/highlight-es/languages/erlang.js":return import("./libs/highlight-es/languages/erlang.js");case"../../libs/highlight-es/languages/excel.js":return import("./libs/highlight-es/languages/excel.js");case"../../libs/highlight-es/languages/fix.js":return import("./libs/highlight-es/languages/fix.js");case"../../libs/highlight-es/languages/flix.js":return import("./libs/highlight-es/languages/flix.js");case"../../libs/highlight-es/languages/fortran.js":return import("./libs/highlight-es/languages/fortran.js");case"../../libs/highlight-es/languages/fsharp.js":return import("./libs/highlight-es/languages/fsharp.js");case"../../libs/highlight-es/languages/gams.js":return import("./libs/highlight-es/languages/gams.js");case"../../libs/highlight-es/languages/gauss.js":return import("./libs/highlight-es/languages/gauss.js");case"../../libs/highlight-es/languages/gcode.js":return import("./libs/highlight-es/languages/gcode.js");case"../../libs/highlight-es/languages/gherkin.js":return import("./libs/highlight-es/languages/gherkin.js");case"../../libs/highlight-es/languages/glsl.js":return import("./libs/highlight-es/languages/glsl.js");case"../../libs/highlight-es/languages/gml.js":return import("./libs/highlight-es/languages/gml.js");case"../../libs/highlight-es/languages/go.js":return import("./libs/highlight-es/languages/go.js");case"../../libs/highlight-es/languages/golo.js":return import("./libs/highlight-es/languages/golo.js");case"../../libs/highlight-es/languages/gradle.js":return import("./libs/highlight-es/languages/gradle.js");case"../../libs/highlight-es/languages/graphql.js":return import("./libs/highlight-es/languages/graphql.js");case"../../libs/highlight-es/languages/groovy.js":return import("./libs/highlight-es/languages/groovy.js");case"../../libs/highlight-es/languages/haml.js":return import("./libs/highlight-es/languages/haml.js");case"../../libs/highlight-es/languages/handlebars.js":return import("./libs/highlight-es/languages/handlebars.js");case"../../libs/highlight-es/languages/haskell.js":return import("./libs/highlight-es/languages/haskell.js");case"../../libs/highlight-es/languages/haxe.js":return import("./libs/highlight-es/languages/haxe.js");case"../../libs/highlight-es/languages/hsp.js":return import("./libs/highlight-es/languages/hsp.js");case"../../libs/highlight-es/languages/http.js":return import("./libs/highlight-es/languages/http.js");case"../../libs/highlight-es/languages/hy.js":return import("./libs/highlight-es/languages/hy.js");case"../../libs/highlight-es/languages/inform7.js":return import("./libs/highlight-es/languages/inform7.js");case"../../libs/highlight-es/languages/ini.js":return import("./libs/highlight-es/languages/ini.js");case"../../libs/highlight-es/languages/irpf90.js":return import("./libs/highlight-es/languages/irpf90.js");case"../../libs/highlight-es/languages/isbl.js":return import("./libs/highlight-es/languages/isbl.js");case"../../libs/highlight-es/languages/java.js":return import("./libs/highlight-es/languages/java.js");case"../../libs/highlight-es/languages/javascript.js":return import("./libs/highlight-es/languages/javascript.js");case"../../libs/highlight-es/languages/jboss-cli.js":return import("./libs/highlight-es/languages/jboss-cli.js");case"../../libs/highlight-es/languages/json.js":return import("./libs/highlight-es/languages/json.js");case"../../libs/highlight-es/languages/julia-repl.js":return import("./libs/highlight-es/languages/julia-repl.js");case"../../libs/highlight-es/languages/julia.js":return import("./libs/highlight-es/languages/julia.js");case"../../libs/highlight-es/languages/kotlin.js":return import("./libs/highlight-es/languages/kotlin.js");case"../../libs/highlight-es/languages/lasso.js":return import("./libs/highlight-es/languages/lasso.js");case"../../libs/highlight-es/languages/latex.js":return import("./libs/highlight-es/languages/latex.js");case"../../libs/highlight-es/languages/ldif.js":return import("./libs/highlight-es/languages/ldif.js");case"../../libs/highlight-es/languages/leaf.js":return import("./libs/highlight-es/languages/leaf.js");case"../../libs/highlight-es/languages/less.js":return import("./libs/highlight-es/languages/less.js");case"../../libs/highlight-es/languages/lisp.js":return import("./libs/highlight-es/languages/lisp.js");case"../../libs/highlight-es/languages/livecodeserver.js":return import("./libs/highlight-es/languages/livecodeserver.js");case"../../libs/highlight-es/languages/livescript.js":return import("./libs/highlight-es/languages/livescript.js");case"../../libs/highlight-es/languages/llvm.js":return import("./libs/highlight-es/languages/llvm.js");case"../../libs/highlight-es/languages/lsl.js":return import("./libs/highlight-es/languages/lsl.js");case"../../libs/highlight-es/languages/lua.js":return import("./libs/highlight-es/languages/lua.js");case"../../libs/highlight-es/languages/makefile.js":return import("./libs/highlight-es/languages/makefile.js");case"../../libs/highlight-es/languages/markdown.js":return import("./libs/highlight-es/languages/markdown.js");case"../../libs/highlight-es/languages/mathematica.js":return import("./libs/highlight-es/languages/mathematica.js");case"../../libs/highlight-es/languages/matlab.js":return import("./libs/highlight-es/languages/matlab.js");case"../../libs/highlight-es/languages/maxima.js":return import("./libs/highlight-es/languages/maxima.js");case"../../libs/highlight-es/languages/mel.js":return import("./libs/highlight-es/languages/mel.js");case"../../libs/highlight-es/languages/mercury.js":return import("./libs/highlight-es/languages/mercury.js");case"../../libs/highlight-es/languages/mipsasm.js":return import("./libs/highlight-es/languages/mipsasm.js");case"../../libs/highlight-es/languages/mizar.js":return import("./libs/highlight-es/languages/mizar.js");case"../../libs/highlight-es/languages/mojolicious.js":return import("./libs/highlight-es/languages/mojolicious.js");case"../../libs/highlight-es/languages/monkey.js":return import("./libs/highlight-es/languages/monkey.js");case"../../libs/highlight-es/languages/moonscript.js":return import("./libs/highlight-es/languages/moonscript.js");case"../../libs/highlight-es/languages/n1ql.js":return import("./libs/highlight-es/languages/n1ql.js");case"../../libs/highlight-es/languages/nestedtext.js":return import("./libs/highlight-es/languages/nestedtext.js");case"../../libs/highlight-es/languages/nginx.js":return import("./libs/highlight-es/languages/nginx.js");case"../../libs/highlight-es/languages/nim.js":return import("./libs/highlight-es/languages/nim.js");case"../../libs/highlight-es/languages/nix.js":return import("./libs/highlight-es/languages/nix.js");case"../../libs/highlight-es/languages/node-repl.js":return import("./libs/highlight-es/languages/node-repl.js");case"../../libs/highlight-es/languages/nsis.js":return import("./libs/highlight-es/languages/nsis.js");case"../../libs/highlight-es/languages/objectivec.js":return import("./libs/highlight-es/languages/objectivec.js");case"../../libs/highlight-es/languages/ocaml.js":return import("./libs/highlight-es/languages/ocaml.js");case"../../libs/highlight-es/languages/openscad.js":return import("./libs/highlight-es/languages/openscad.js");case"../../libs/highlight-es/languages/oxygene.js":return import("./libs/highlight-es/languages/oxygene.js");case"../../libs/highlight-es/languages/parser3.js":return import("./libs/highlight-es/languages/parser3.js");case"../../libs/highlight-es/languages/perl.js":return import("./libs/highlight-es/languages/perl.js");case"../../libs/highlight-es/languages/pf.js":return import("./libs/highlight-es/languages/pf.js");case"../../libs/highlight-es/languages/pgsql.js":return import("./libs/highlight-es/languages/pgsql.js");case"../../libs/highlight-es/languages/php-template.js":return import("./libs/highlight-es/languages/php-template.js");case"../../libs/highlight-es/languages/php.js":return import("./libs/highlight-es/languages/php.js");case"../../libs/highlight-es/languages/plaintext.js":return import("./libs/highlight-es/languages/plaintext.js");case"../../libs/highlight-es/languages/pony.js":return import("./libs/highlight-es/languages/pony.js");case"../../libs/highlight-es/languages/powershell.js":return import("./libs/highlight-es/languages/powershell.js");case"../../libs/highlight-es/languages/processing.js":return import("./libs/highlight-es/languages/processing.js");case"../../libs/highlight-es/languages/profile.js":return import("./libs/highlight-es/languages/profile.js");case"../../libs/highlight-es/languages/prolog.js":return import("./libs/highlight-es/languages/prolog.js");case"../../libs/highlight-es/languages/properties.js":return import("./libs/highlight-es/languages/properties.js");case"../../libs/highlight-es/languages/protobuf.js":return import("./libs/highlight-es/languages/protobuf.js");case"../../libs/highlight-es/languages/puppet.js":return import("./libs/highlight-es/languages/puppet.js");case"../../libs/highlight-es/languages/purebasic.js":return import("./libs/highlight-es/languages/purebasic.js");case"../../libs/highlight-es/languages/python-repl.js":return import("./libs/highlight-es/languages/python-repl.js");case"../../libs/highlight-es/languages/python.js":return import("./libs/highlight-es/languages/python.js");case"../../libs/highlight-es/languages/q.js":return import("./libs/highlight-es/languages/q.js");case"../../libs/highlight-es/languages/qml.js":return import("./libs/highlight-es/languages/qml.js");case"../../libs/highlight-es/languages/r.js":return import("./libs/highlight-es/languages/r.js");case"../../libs/highlight-es/languages/reasonml.js":return import("./libs/highlight-es/languages/reasonml.js");case"../../libs/highlight-es/languages/rib.js":return import("./libs/highlight-es/languages/rib.js");case"../../libs/highlight-es/languages/roboconf.js":return import("./libs/highlight-es/languages/roboconf.js");case"../../libs/highlight-es/languages/routeros.js":return import("./libs/highlight-es/languages/routeros.js");case"../../libs/highlight-es/languages/rsl.js":return import("./libs/highlight-es/languages/rsl.js");case"../../libs/highlight-es/languages/ruby.js":return import("./libs/highlight-es/languages/ruby.js");case"../../libs/highlight-es/languages/ruleslanguage.js":return import("./libs/highlight-es/languages/ruleslanguage.js");case"../../libs/highlight-es/languages/rust.js":return import("./libs/highlight-es/languages/rust.js");case"../../libs/highlight-es/languages/sas.js":return import("./libs/highlight-es/languages/sas.js");case"../../libs/highlight-es/languages/scala.js":return import("./libs/highlight-es/languages/scala.js");case"../../libs/highlight-es/languages/scheme.js":return import("./libs/highlight-es/languages/scheme.js");case"../../libs/highlight-es/languages/scilab.js":return import("./libs/highlight-es/languages/scilab.js");case"../../libs/highlight-es/languages/scss.js":return import("./libs/highlight-es/languages/scss.js");case"../../libs/highlight-es/languages/shell.js":return import("./libs/highlight-es/languages/shell.js");case"../../libs/highlight-es/languages/smali.js":return import("./libs/highlight-es/languages/smali.js");case"../../libs/highlight-es/languages/smalltalk.js":return import("./libs/highlight-es/languages/smalltalk.js");case"../../libs/highlight-es/languages/sml.js":return import("./libs/highlight-es/languages/sml.js");case"../../libs/highlight-es/languages/sqf.js":return import("./libs/highlight-es/languages/sqf.js");case"../../libs/highlight-es/languages/sql.js":return import("./libs/highlight-es/languages/sql.js");case"../../libs/highlight-es/languages/stan.js":return import("./libs/highlight-es/languages/stan.js");case"../../libs/highlight-es/languages/stata.js":return import("./libs/highlight-es/languages/stata.js");case"../../libs/highlight-es/languages/step21.js":return import("./libs/highlight-es/languages/step21.js");case"../../libs/highlight-es/languages/stylus.js":return import("./libs/highlight-es/languages/stylus.js");case"../../libs/highlight-es/languages/subunit.js":return import("./libs/highlight-es/languages/subunit.js");case"../../libs/highlight-es/languages/swift.js":return import("./libs/highlight-es/languages/swift.js");case"../../libs/highlight-es/languages/taggerscript.js":return import("./libs/highlight-es/languages/taggerscript.js");case"../../libs/highlight-es/languages/tap.js":return import("./libs/highlight-es/languages/tap.js");case"../../libs/highlight-es/languages/tcl.js":return import("./libs/highlight-es/languages/tcl.js");case"../../libs/highlight-es/languages/thrift.js":return import("./libs/highlight-es/languages/thrift.js");case"../../libs/highlight-es/languages/toml.js":return import("./libs/highlight-es/languages/toml.js");case"../../libs/highlight-es/languages/tp.js":return import("./libs/highlight-es/languages/tp.js");case"../../libs/highlight-es/languages/twig.js":return import("./libs/highlight-es/languages/twig.js");case"../../libs/highlight-es/languages/typescript.js":return import("./libs/highlight-es/languages/typescript.js");case"../../libs/highlight-es/languages/vala.js":return import("./libs/highlight-es/languages/vala.js");case"../../libs/highlight-es/languages/vbnet.js":return import("./libs/highlight-es/languages/vbnet.js");case"../../libs/highlight-es/languages/vbscript-html.js":return import("./libs/highlight-es/languages/vbscript-html.js");case"../../libs/highlight-es/languages/vbscript.js":return import("./libs/highlight-es/languages/vbscript.js");case"../../libs/highlight-es/languages/verilog.js":return import("./libs/highlight-es/languages/verilog.js");case"../../libs/highlight-es/languages/vhdl.js":return import("./libs/highlight-es/languages/vhdl.js");case"../../libs/highlight-es/languages/vim.js":return import("./libs/highlight-es/languages/vim.js");case"../../libs/highlight-es/languages/wasm.js":return import("./libs/highlight-es/languages/wasm.js");case"../../libs/highlight-es/languages/wren.js":return import("./libs/highlight-es/languages/wren.js");case"../../libs/highlight-es/languages/x86asm.js":return import("./libs/highlight-es/languages/x86asm.js");case"../../libs/highlight-es/languages/xl.js":return import("./libs/highlight-es/languages/xl.js");case"../../libs/highlight-es/languages/xml.js":return import("./libs/highlight-es/languages/xml.js");case"../../libs/highlight-es/languages/xquery.js":return import("./libs/highlight-es/languages/xquery.js");case"../../libs/highlight-es/languages/yaml.js":return import("./libs/highlight-es/languages/yaml.js");case"../../libs/highlight-es/languages/zephir.js":return import("./libs/highlight-es/languages/zephir.js");default:return new Promise((function(s,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`../../libs/highlight-es/languages/${e.toLowerCase()}.js`)));await Promise.all(s).then((s=>s.forEach(((s,t)=>{const i=e[t],a=s.default;this._module.registerLanguage(i,a)})))).catch(this.loadErrResolver)}loadCondition(e){return e.size>0}renderItem(e){this._module.highlightElement(e)}async beforeRender(e=new Set){await this.#e(Array.from(e))}async importModule(){g("./dist/libs/highlight-es/github-dark.css");return(await import("./libs/highlight-es/highlight.min.js")).default}};var o=h.render.bind(h);const{katexOptions:c}=e;const u=new class extends r{name="KaTeX";_targetElList=()=>document.querySelectorAll(".math");loadCondition(e){return e}renderErrResolver(e,s){const t=s.textContent;e instanceof this._module.ParseError?s.innerHTML=("Error in LaTeX '"+t+"': "+e.message).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(s.textContent=this.name+" "+r.renderErrMsg,console.error(e))}renderItem(e){const s=e.textContent;this._module.render(s,e,c)}async importModule(){g("./dist/libs/katex/katex.min.css");return(await import("./libs/katex/katex.min.js")).default}};var p=u.render.bind(u);const d=new class{events=new Map;emit(e,...s){const t=this.events.get(e);t&&t.forEach((e=>{e.apply(null,s)}))}on(e,s){const t=this.events.get(e);t?t.push(s):this.events.set(e,[s])}off(e,s){const t=this.events.get(e);if(t)if(1===t.length)this.events.delete(e);else{const e=t.indexOf(s);t.splice(e,1)}}};function m(e={},s={}){for(const t of Object.keys(s)){const i="object"==typeof e[t],a="object"==typeof s[t],n=t in e;if(!n||i)if(n&&i)a&&m(e[t],s[t]);else if(!n)if(a){let i;i="undefined"!=typeof structuredClone?structuredClone(s[t]):JSON.parse(JSON.stringify(s[t])),e[t]=i}else e[t]=s[t]}return e}class b extends r{static loadErrMsg=n("图表加载失败","Chart load error");static renderErrMsg=n("图表渲染失败","Chart render error");name=void 0;loadCondition(){return!0}loadErrResolver(e){console.error(e),this._targetElList().forEach((e=>e.textContent=b.loadErrMsg))}renderErrResolver(e,s){console.error(e),s.textContent=b.renderErrMsg}renderItem(e,s){throw new l("renderItem")}renderAll(){for(const e of this._targetElList()){const s=e.__ChartContent__;try{this.renderItem(e,s)}catch(s){this.renderErrResolver(s,e)}}}}let[j,f,y]=[null,null,null];const w=e.echartsOptions;function _(e={},s){const t=["width","height","color","backgroundColor","darkMode","textStyle","aria","axisPointer","animation","animationThreshold","animationDuration","animationEasing","animationDelay","animationDurationUpdate","animationEasingUpdate","animationDelayUpdate","stateAnimation","blendMode","hoverLayerThreshold","options","useUTC","media"];for(const i in e)if(!t.includes(i))if("series"!==i){switch(i){case"xAxis":case"yAxis":s.components.add("grid");continue;case"radiusAxis":case"angleAxis":s.components.add("polar");continue;case"parallelAxis":s.components.add("parallel");continue}s.components.add(i)}else{const{series:t}=e;if(!(t instanceof Array)){s.charts.add(t.type);continue}for(const e of t)"type"in e&&s.charts.add(e.type)}}const v=new class extends b{_targetElList=()=>document.querySelectorAll(".echarts-container");#s=new MutationObserver((e=>{for(const e of this._targetElList())this._module.dispose(e),this.renderItem(e)}));#t(){this._targetElList().forEach((e=>j.getInstanceByDom(e).resize()))}#i(e,s){s.width&&(e.style.width=s.width+"px",delete s.width),s.height&&(e.style.height=s.height+"px",delete s.height)}renderItem(e){this.#i(e,e.__ChartOptions__);const s=document.body.classList.contains("dark"),t=s?"another-dark":"light",i=this._module.init(e,t),a=structuredClone(w),n=function(e,s){let t=e;if(s&&"calendar"in e){const s={splitLine:{lineStyle:{color:"white"}},dayLabel:{color:"#eee"},monthLabel:{color:"#eee"},itemStyle:{color:"none",borderWidth:.5}};e.calendar instanceof Array?e.calendar.forEach((e=>m(e,s))):m(e.calendar,s)}return t}(structuredClone(e.__ChartOptions__),s),l=m(a,n);i.setOption(l)}async beforeRender(){const e=Array.from(this._targetElList()).map((e=>e.__ChartOptions__));try{await async function(e){const s={charts:new Set,components:new Set};_(w,s),e.forEach((e=>_(e,s)));const t=Array.from(s.charts).map(f),i=Array.from(s.components).map(y);await Promise.all(t.concat(i)).then(j.use)}(e)}catch(e){this.loadErrResolver(e)}}async importModule(){const[e,s]=await Promise.all([import("./libs/echarts/core.js"),import("./chunks/echartsAnotherDarkTheme.min.js")]);j=e.default,f=e.importChart,y=e.importComponent,j.registerTheme("another-dark",s.default);const t=document.body;return this.#s.observe(t,{attributes:!0,attributeFilter:["class"]}),d.on("catalog-toggle",(()=>{setTimeout(this.#t.bind(this),1e3)})),window.addEventListener("resize",function(e,s){let t=null;return function(...i){t&&clearTimeout(t),t=setTimeout((()=>e(...i)),s)}}(this.#t.bind(this),200)),j}};var T=v.render.bind(v);function L(e,s){const t=document.createElement("script");return t.src=e,t.type="text/javascript",document.head.appendChild(t),new Promise(((i,a)=>{t.onload=function(){if(!(s in globalThis)){const e=`Module ${s} does not support this import method.`;console.error(e),a(e)}const e=globalThis[s];globalThis[s]=void 0,i(e)},t.onerror=function(t){console.error(`Error loading dynamically imported module "${s}": ${e}`),a(t)}}))}globalThis.raphael=null;const{flowchartOptions:x}=e;const k=new class extends b{_targetElList=()=>document.querySelectorAll(".flowchart-container");constructor(){super()}renderItem(e,s){this._module.parse(s).drawSVG(e,x)}async importModule(){globalThis.raphael=await L("./dist/libs/flowchart.js/raphael.min.js","raphael");return await L("./dist/libs/flowchart.js/flowchart.min.js","flowchart")}};var C=k.render.bind(k);const E=new class extends b{_targetElList=()=>document.querySelectorAll(".sequencechart-container");constructor(){super()}renderItem(e,s){const t=new this._module(s);e.appendChild(t.dom())}async importModule(){return(await import("./libs/sequence-diagram/sequence-diagram-web.mjs")).SequenceDiagram}};var M=E.render.bind(E);const{language:S,ganttOptions:q}=e;"language"in q||(q.language=S);const H=new class extends b{_targetElList=()=>document.querySelectorAll(".ganttchart-container");renderItem(e,s){new this._module(e,s,q)}async importModule(){g("./dist/libs/frappe-gantt/frappe-gantt.min.css");return(await import("./libs/frappe-gantt/frappe-gantt.min.js")).default}};var A=H.render.bind(H);let I=null;const{railroadOptions:O}=e,R=/[\x00-\x7F]/,N=/['"]([^'"]*[/\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]+[^'"]*)['"]/gu;const P=new class extends b{_targetElList=()=>document.querySelectorAll(".railroad-container");renderItem(e,s=""){const t=I.CHAR_WIDTH,i=N.test(s),a=(s.match(N)||[]).map((e=>e.slice(1,-1))).every((e=>R.test(e))),n=i&&(a?13:14)||I.CHAR_WIDTH;I.CHAR_WIDTH<n&&(I.CHAR_WIDTH=n);const l=this._module.concat(e);new Function("Diagram","ComplexDiagram","Sequence","Stack","OptionalSequence","AlternatingSequence","Choice","HorizontalChoice","MultipleChoice","Optional","OneOrMore","ZeroOrMore","Group","Start","End","Terminal","NonTerminal","Comment","Skip","Block","targetElement",s+".addTo(targetElement)").apply(null,l),I.CHAR_WIDTH=t}async importModule(){g("./dist/libs/railroad-diagrams/railroad.css");const e=await import("./libs/railroad-diagrams/railroad.min.js"),{default:s,Options:t}=e;return Object.assign(t,{VS:O.verticalGap,AR:O.arcRadius,INTERNAL_ALIGNMENT:O.internalAlignment,CHAR_WIDTH:O.charWidth,COMMENT_CHAR_WIDTH:O.commentCharWidth}),I=t,[s.Diagram,s.ComplexDiagram,s.Sequence,s.Stack,s.OptionalSequence,s.AlternatingSequence,s.Choice,s.HorizontalChoice,s.MultipleChoice,s.Optional,s.OneOrMore,s.ZeroOrMore,s.Group,s.Start,s.End,s.Terminal,s.NonTerminal,s.Comment,s.Skip,s.Block]}};var W=P.render.bind(P);const{qrcodeOptions:$}=e;const D=new class extends b{_targetElList=()=>document.querySelectorAll(".qrcode-container");#s=new MutationObserver(this.renderAll.bind(this));renderItem(e){const s=getComputedStyle(document.body),t=s.getPropertyValue("--default-tx-color"),i=s.getPropertyValue("--chart-bg-color"),a=Object.assign({},$),n=e.__QRCodeContent__,l=a.width||256;a.color=t,a.background=i,a.content=n||a.content||(()=>{throw new Error("No QRCode content provided.")})();const r=new this._module(a);e.style.width=l+"px",e.innerHTML=r.svg()}async importModule(){const e=await L("./dist/libs/qrcode-svg/qrcode.min.js","QRCode"),s=document.body;return this.#s.observe(s,{attributes:!0,attributeFilter:["class"]}),e}};var z=D.render.bind(D);const F=new Map([["echarts",T],["flow-chart",C],["sequence-chart",M],["gantt-chart",A],["railroad-chart",W],["qrcode",z]]);async function G(e=new Set){for(const s of e){if(!F.has(s)){console.error("Unknown chart type: "+s);continue}const e=F.get(s);await e()}}function U(e){return Object.entries(e).filter((([e,s])=>null!=s)).map((([e,s])=>`${e}="${(e=>e.toString().replaceAll('"',"&quot;"))(s)}"`)).join(" ")}function B(e,s="",t=null){if("document"in globalThis){if("text"===e)return document.createTextNode(s);const i=document.createElement(e);return function(e,s){if(s)for(const[t,i]of Object.entries(s))void 0!==i&&(i instanceof Function?e[t]=i:e.setAttribute(t,i))}(i,t),function(e,s){if(s instanceof Array)for(const t of s)e.appendChild(t);else if(s instanceof HTMLElement)e.appendChild(s);else{if("string"!=typeof s)throw Error("Unexpected element content: "+s);e.textContent=s}}(i,s),i}switch(s instanceof Array&&(s=s.join("")),e){case"text":return s;case"hr":case"br":return`<${e}>`;case"img":case"input":return`<${e} ${t?U(t):""}>`}return`<${e}${t?" "+U(t):""}>${s}</${e}>`}const Q=[/[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]/gu,/[A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]+/g,/\p{Script=Greek}+/gu,/\p{Script=Arabic}+/gu,/\p{Script=Cyrillic}+/gu,/(\-|\+)?\d+(\.\d+)?/g];var V=e=>e.replaceAll("<","&lt;").replaceAll(">","&gt;");function Z(e,s,t=!1){if(!e.includes(s))return null;let i="",a=!1;for(;e.length;){const n=e.slice(0,1);if(e=e.substr(1),"\\"!==n||(a=!a,t)){if(n===s&&!a)break;i+=n,a=!1}}return i}const J=new Map([["#","strong"],["`","code"],["_","u"],["/","i"],["-","del"],[":","span.dim"],[",","sub"],["'","sup"],["$","span.math"]]),K=new Map([["[","]"],["{","}"]]);let X=null;if("undefined"==typeof window){const e=await import("../builder/utils/renderer/index.js");X=s=>e.render(s,"katex")}class Y{constructor(e){this.content=e}count=()=>function(e=""){return 0===e.length?0:Q.map((s=>{const t=e.match(s);return null!==t?t.length:0})).reduce(((e,s)=>e+s))}(this.content);toHTML=()=>B("text",this.content)}class ee{constructor(e,s){const t=J.get(e);if(t.includes(".")){const[e,s]=t.split(".");this.tagName=e,this.className=s}else this.tagName=t;this.content=s,"math"===this.className&&"object"==typeof window&&(globalThis.__ContainsFormula__=!0)}count=()=>ae(this.content);toHTML(){if("math"===this.className&&"undefined"==typeof window){const e=B("img","",{src:"./"+X(this.content)});return B("span",e,{class:"math"})}const e=void 0===this.className?null:{class:this.className};return B(this.tagName,ne(this.content),e)}}class se{constructor(e,s){this.content=e,this.address=s}count=()=>0;toHTML(){const e=ne(this.content);if(this.address.startsWith("http"))return B("a",e,{href:this.address,target:"_blank"});if(this.address.startsWith("//"))return B("a",e,{href:this.address.slice(2)});return B("a",e,{href:"#"+("static/"+this.address)})}}class te{constructor(e,s){this.content=e,this.notation=s}count=()=>ae(this.content);toHTML(){const e=B("rp","("),s=B("rp",")"),t=B("rt",this.notation);return B("ruby",ne(this.content).concat([e,t,s]),{"data-notation":this.notation})}}function ie(e){function s(){const s=e.charAt(0);return e=e.substring(1),s}function t(e){let s;return"["===e?s=se:"{"===e&&(s=te),s}const i=[];let a="",n="",l="",r=!1,g=!1;for(;e.length;){const h=s();if(J.has(h)){if(r){g?n+=h:a+=h,r=!1;continue}if(g&&h!=l){n+=h;continue}const t=s();if(t!=h){g?n+=h:a+=h,e=t+e;continue}g?(i.push(new ee(h,n)),n="",l=""):(i.push(new Y(a)),a="",l=h),g=!g;continue}if(["[","{"].includes(h)&&!g&&!r){const n=h,l=K.get(n);i.push(new Y(a)),a="";let r=n;const g=Z(e,l,!0);if(null!=g){r+=e.slice(0,g.length+1),e=e.substr(g.length+1);const a=s();if(r+=a,"("===a){const s=Z(e,")");if(null!=s){let a=t(n);e=e.substr(s.length+1),i.push(new a(g,s));continue}}}a+=r;continue}if("\\"===h){r=!r;continue}let o;r?(o="\\"+h,r=!1):o=h,g?n+=o:a+=o}return n.length&&i.push(new ee(l,n)),a.length&&i.push(new Y(a)),i}function ae(e){return ie(e).reduce(((e,s)=>e+s.count()),0)}function ne(e){const s=ie(e).filter((e=>!(e instanceof Y&&!e.content.length))).map((e=>e.toHTML()));return"object"!=typeof window&&e===s[0]?V(e):s}class le{constructor(e){const s=e.split(" "),t=s[0];let i=0;for(const e of t)"#"===e&&(i+=1);i>6&&(i=0);const a=s.slice(1).join(" ");this.tagName="h"+i,this.content=a}toHTML(){const e=void 0===this.id?null:{id:this.id},s=ne(this.content);return B(this.tagName,s,e)}static pattern=e=>/^(#+ )/.test(e)}class re{tagName="p";constructor(e){this.content=e.trimStart()}toHTML(){const e=ne(this.content);return B(this.tagName,e)}}class ge{children=[];title="";type=ge.NormalTypeEnum;constructor(e){if(!(e[0]instanceof re&&ge.alertPattern(e[0].content)))return void(this.children=e);let s;const t=e[0].content,i=Z(t.slice(1),"]");switch(i.toLowerCase()){case"note":case"笔记":this.type=ge.NoteTypeEnum,s=n("笔记","Note");break;case"tip":case"提示":this.type=ge.TipTypeEnum,s=n("提示","Tip");break;case"important":case"重要":this.type=ge.ImportantTypeEnum,s=n("重要","Important");break;case"warning":case"注意":this.type=ge.warningTypeEnum,s=n("注意","Warning");break;case"caution":case"警告":this.type=ge.CautionTypeEnum,s=n("警告","Caution")}const a=t.slice(i.length+2).trimStart();this.title=a||s,this.children=e.slice(1)}toHTML(){if(this.type===ge.NormalTypeEnum){return B("blockquote",this.children.map((e=>e.toHTML())))}const e=B("p",this.title,{class:"alert-title"}),s=this.children.map((e=>e.toHTML()));return B("blockquote",[e].concat(s),{class:`alert ${this.type.description}`})}static pattern=e=>">"===e||e.startsWith("> ");static alertPattern=e=>/^\[(.*)+\].*/.test(e);static NormalTypeEnum=Symbol("normal");static NoteTypeEnum=Symbol("note");static TipTypeEnum=Symbol("tip");static ImportantTypeEnum=Symbol("important");static warningTypeEnum=Symbol("warning");static CautionTypeEnum=Symbol("caution")}class he{toHTML=()=>B("hr");static pattern=e=>e.match(/(-\s*-\s*-)|(\*\s*\*\s*\*)/)&&!e.match(/[a-zA-Z0-9]/)}class oe{children=[];constructor(e){this.isOrdered=oe.orderedPattern(e),this.tagName=this.isOrdered?"ol":"ul",this.children=[oe.getContent(e,this.isOrdered)]}toHTML(){const e=this.children.map((e=>{if("string"==typeof e){return B("li",ne(e))}return e.toHTML()}));return B(this.tagName,e)}static orderedPattern=e=>/^([\s\t]*[0-9]+. )/.test(e);static unorderedPattern=e=>/^([\s\t]*[+-] )/.test(e);static taskListPattern=e=>/^[\s\t]*- \[( |x|\*)\] /.test(e);static isListPattern=e=>oe.orderedPattern(e)||oe.unorderedPattern(e);static getContent(e,s){if(s)return e.match(/(?<=^([\s\t]*[0-9]+. )).+$/g)[0];if(this.taskListPattern(e)){const s=e.trimStart();return new ce(s.slice(6),s.slice(0,6))}if(this.unorderedPattern(e))return e.match(/(?<=^([\s\t]*[+-]+ )).+$/g)[0];throw new Error("Unexpected list item: "+e)}}class ce{constructor(e,s){this.content=e,this.isChecked="x"===s[3]||"*"===s[3]}count(){return ae(this.content)}toHTML(){const e=B("input","",{type:"checkbox",checked:!!this.isChecked||void 0}),s=B("text",this.content);return B("li",[e,s],{class:"task-list-item"})}}class ue{headerCells=[""];bodyRows=[[""]];constructor(e,s){this.headerCells=e,this.bodyRows=s}#a=e=>B("th",e);#n=e=>B("td",ne(e));#l=e=>B("tr",e.map(this.#a));#r=e=>B("tr",e.map(this.#n));toHTML(){const e=B("thead",this.#l(this.headerCells)),s=B("tbody",this.bodyRows.map(this.#r));return B("div",B("table",[e,s]),{class:"table"})}static pattern=e=>e.startsWith("| ")}class pe{source="";description="";constructor(e){e=e.substr(2),this.description=Z(e,"]"),e=e.substr(this.description.length+2),this.source=Z(e,")")}static containerGenerator(e){return B("div",e,{class:"media-container"})}static patternGenerator(e){return s=>s.startsWith(e+"[")&&s.endsWith(")")}static replaceContentGenerator(e,s){return`${s}<br>${B("a",n("从这里下载！","Download Here!"),{href:e})}`}static srcUrlResolver(e){let s;if(e.startsWith("http")||e.startsWith("data"))s=e;else{s=location.hash.slice(1).split("/").slice(0,-1).join("/")+"/"+e}return s}}class de extends pe{static pattern=pe.patternGenerator("!");toHTML(){const e=B("img","",{src:pe.srcUrlResolver(this.source),alt:this.description,loading:"lazy",tabindex:0});return e.onclick=e=>window.open(e.target.src),e.onerror=e=>{const s=e.target;s.onclick=null,s.title=this.description,s.classList.add("load-error")},pe.containerGenerator(e)}}class me extends pe{static pattern=pe.patternGenerator(":");toHTML(){const e=pe.srcUrlResolver(this.source),s=B("audio",pe.replaceContentGenerator(e,this.description),{src:e,controls:!0});return pe.containerGenerator(s)}}class be extends pe{static pattern=pe.patternGenerator("?");toHTML(){const e=pe.srcUrlResolver(this.source),s=B("video",pe.replaceContentGenerator(e,this.description),{src:e,controls:"true"});return pe.containerGenerator(s)}}const je=e=>pe.patternGenerator("@")(e)||e.startsWith("@@@");class fe extends pe{toHTML(){const e=pe.srcUrlResolver(this.source),s=B("iframe",this.description,{src:e,title:this.description,sandbox:"allow-scripts",loading:"lazy"});return pe.containerGenerator(s)}}class ye{constructor(e,s){this.lang=s,this.content=e}toHTML(){const e=["plaintext","text",""].includes(this.lang);let s,t;e||globalThis.__LanguageList__.add(this.lang),e?(t="nohighlight",s="PLAINTEXT"):(t=`language-${this.lang}`,s=this.lang.toUpperCase());const i=B("code",this.content,{class:t,tabindex:0});return B("pre",i,{class:"code-block","data-language":s})}static pattern=e=>e.startsWith("```")}class we{summary="";content="";constructor(e,s){this.summary=s,this.content=e}toHTML(){const e=B("summary",ne(this.summary)),s=B("details",e),t=B("div",B("div",this.content.map((e=>e.toHTML())),{class:"details-children"}),{class:"details-children-container"});return B("div",[s,t],{class:"details"})}static pattern=e=>e.startsWith(">>>")}class _e{content="";description="";constructor(e,s){this.content=e,this.description=s}toHTML(){return globalThis.__ContainsFormula__=!0,B("div",this.content,{class:"math",title:this.description})}static pattern=e=>e.startsWith("$$$")}class ve{static#g=e=>`<style>\nbody{transition: .3s .15s}\nbody.light{color:#333;background:#fff}\nbody.dark{color:#f7f7f7;background:#252525}</style>\n<script>\nconst rootEl = document.documentElement\nfunction postHeight() {\n    const parent = window.parent\n    const height = parseFloat(getComputedStyle(rootEl).height)\n    parent.postMessage({\n        height,\n        id: "${e}"\n    }, "*")\n}\nwindow.addEventListener("load", postHeight)\nwindow.addEventListener("message", e => {\nconst { fontSize, theme } = e.data\nif (fontSize) {\n    rootEl.style.fontSize = fontSize\n    postHeight()\n}\nif (theme) {\n    document.body.classList = theme\n}\n})\n<\/script>`;constructor(e,s){globalThis.__IframeCounter__+=1,this.id="iframe_"+globalThis.__IframeCounter__,this.description=s,this.content=e+ve.#g(this.id)}toHTML(){const e=B("iframe",this.description,{id:this.id,title:this.description,srcdoc:this.content,sandbox:"allow-scripts"});return pe.containerGenerator(e)}}class Te{constructor(e){const s=new Function("let option;"+e+";return option")();this.chartOptions=s,globalThis.__ChartTypeList__.add("echarts")}toHTML(){const e=B("div","",{class:"echarts-container"});return e.__ChartOptions__=this.chartOptions,e}}class Le{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("flow-chart")}toHTML(){const e=B("div","",{class:"flowchart-container"});return e.__ChartContent__=this.content,e}}class xe{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("sequence-chart")}toHTML(){const e=B("div","",{class:"sequencechart-container"});return e.__ChartContent__=this.content,e}}class ke{constructor(e){this.content=new Function(`const tasks = [${e}]; return tasks`)(),globalThis.__ChartTypeList__.add("gantt-chart")}toHTML(){const e=B("div","",{class:"ganttchart-container"});return e.__ChartContent__=this.content,e}}class Ce{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("railroad-chart")}toHTML(){const e=B("div","",{class:"railroad-container"});return e.__ChartContent__=this.content,e}}class Ee{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("qrcode")}toHTML(){const e=B("div","",{class:"qrcode-container"});return e.__QRCodeContent__=this.content,e}}class Me{constructor(e){this.content=e}toHTML(){return B("span",this.content)}}class Se{static pattern=e=>e.startsWith("!!!");#h=null;constructor(e,s){switch(s){case"":case"echarts":this.#h=new Te(e);break;case"flow":case"flowchart":case"flow chart":case"flow-chart":this.#h=new Le(e);break;case"sequence":case"sequencechart":case"sequence char":case"sequence-chart":this.#h=new xe(e);break;case"gantt":case"ganttchart":case"gantt chart":case"gantt-chart":this.#h=new ke(e);break;case"rail":case"railroad":case"railroadchart":case"railroad chart":case"railroad-chart":this.#h=new Ce(e);break;case"qrcode":case"qr-code":case"qr code":this.#h=new Ee(e);break;default:const t="Unknown chart type: "+s;console.error(t),this.#h=new Me(t)}}toHTML(){const e=this.#h.toHTML();return pe.containerGenerator(e)}}function qe(e){let s=0,t=0;for(const i of e){if(i.match(/[^\s\t]/))break;"\t"!==i?(" "===i&&(t+=1),2===t&&(t=0,s+=1)):s+=1}return s}function He(e,s){const t=qe(e),i=new oe(e);for(;s.length&&oe.isListPattern(s[0]);){const e=s.shift(),a=qe(e),n=oe.orderedPattern(e);if(a>t)i.children.push(He(e,s));else{if(a!==t||n!==i.isOrdered){s.unshift(e);break}i.children.push(oe.getContent(e,n))}}return i}function Ae(e,s){let t=e.slice(2)+"\n";for(;s.length;){const e=s.shift();if(!ge.pattern(e)){s.unshift(e);break}t+=e.slice(2)+"\n"}const i=ze(t);return new ge(i)}function Ie(e){return e.split("|").filter((e=>e.length>0)).map((e=>e.trim()))}function Oe(e,s){const t=e,i=[];for(;s.length;){const e=s.shift();if(!ue.pattern(e)){s.unshift(e);break}i.push(e)}const a=Ie(t),n=i.map(Ie);return new ue(a,n)}function Re(e,s){return function(t,i){const a=t.slice(3);let n="";for(;i.length;){const s=i.shift();if(s===e)break;n+=s+"\n"}return new s(n,a)}}const Ne=Re("```",ye),Pe=Re("!!!",Se),We=Re("$$$",_e);function $e(e,s){const t=Re(">>>",we)(e,s);return t.content=ze(t.content),t}function De(e,s){const t=Re("@@@",ve);return e.startsWith("@@@")?t(e,s):new fe(e)}function ze(e){const s=function(e){return-1!=e.indexOf("\r")?e.split("\r\n"):e.split("\n")}(e),t=[];for(;s.length;){const e=s.shift();e.length&&(le.pattern(e)?t.push(new le(e)):he.pattern(e)?t.push(new he):ge.pattern(e)?t.push(Ae(e,s)):oe.isListPattern(e)?t.push(He(e,s)):ue.pattern(e)?t.push(Oe(e,s)):de.pattern(e)?t.push(new de(e)):me.pattern(e)?t.push(new me(e)):be.pattern(e)?t.push(new be(e)):we.pattern(e)?t.push($e(e,s)):_e.pattern(e)?t.push(We(e,s)):ye.pattern(e)?t.push(Ne(e,s)):Se.pattern(e)?t.push(Pe(e,s)):je(e)?t.push(De(e,s)):t.push(new re(e)))}return t}function Fe(e){return function(s){"Enter"!==s.key&&" "!==s.key||e.click()}}function Ge(e){window.scroll({top:e,behavior:"smooth"})}function Ue(e,s){Ge(e.offsetTop+-s)}function Be(){Ge(0)}const Qe=()=>document.querySelectorAll("iframe[srcdoc]");function Ve(e){Qe().forEach((s=>s.contentWindow.postMessage({fontSize:e},"*")))}function Ze(){const e=document.body.classList.contains("dark")?"dark":"light";Qe().forEach((s=>s.contentWindow.postMessage({theme:e},"*")))}const Je=document.querySelector("article"),Ke=n("空文章","Empty Article");function Xe(s,t){globalThis.__LanguageList__=new Set,globalThis.__ChartTypeList__=new Set,globalThis.__ContainsFormula__=!1,globalThis.__IframeCounter__=0;const i=ze(t);if(e.enableCatalog){const e=function(e){return e.filter((e=>e instanceof le)).map(((e,s)=>({id:e.id="headline-"+s,content:ne(e.content),level:e.tagName})))}(i);d.emit("article-rendered",e)}let a=i.map((e=>e.toHTML()));a.length||(a=el("h1",Ke)),s.innerHTML="",a.forEach((e=>s.appendChild(e))),async function(){const e=Array.from(Qe()).map((e=>new Promise(((s,t)=>e.onload=s))));await Promise.all(e)}().then(Ze),s.querySelectorAll("[tabindex='0']").forEach((e=>{e.onkeydown=Fe(e)})),Promise.all([o(globalThis.__LanguageList__),p(globalThis.__ContainsFormula__),G(globalThis.__ChartTypeList__)]).then((()=>{globalThis.__LanguageList__=null,globalThis.__ContainsFormula__=!1,globalThis.__ChartTypeList__=null;const e=sessionStorage.getItem("last-leave-page"),s=sessionStorage.getItem("last-leave-position")||0;sessionStorage.removeItem("last-leave-page"),sessionStorage.removeItem("last-leave-position"),window.scrollY>0||location.hash===e&&Ge(Number.parseInt(s))}))}function Ye(e){const s=new Date(e.timestamp),t=B("code",(new Intl.DateTimeFormat).format(s)),i=B("span",e.title,{class:"underline-target"});return B("li",[t,B("text",": "),i],{tabindex:0,class:"underline-through","data-target-blog":e.link})}function es(e){const s=B("span",e,{class:"underline-target"});return B("li",s,{class:"underline-through",tabindex:0})}d.on("catalog-toggle",(()=>{Je.classList.toggle("with-catalog")})),d.on("catalog-closed",(()=>{Je.classList.remove("with-catalog")}));const ss=document.querySelector("main"),ts=document.querySelector("article"),is=ss.querySelector("#article-list"),as=ss.querySelector("#directory-description"),ns=ss.querySelector("paging-view");function ls(e,s){const{current:t,total:i}=e;ns.setPage(t,i),as.innerHTML="","directoryDescription"in e&&Xe(as,e.directoryDescription),is.innerHTML="",e.content.map(s).forEach((e=>is.appendChild(e))),is.querySelectorAll("[tabindex='0']").forEach((e=>{e.onkeydown=Fe(e)})),ts.innerHTML="",ts.style.display="none",ss.style.display="block",Be()}const rs=document.querySelector("main"),gs=document.querySelector("article"),hs="./.index/";async function os(e){if(!location.hash)return void us.homepage();const i=location.hash.slice(1);if(rs.classList.add("disabled"),us.isIn.newestPage()){const e=hs+"newest_"+ps.current(),s=await t(e);if(!s)return;ls(s,Ye)}else if(us.isIn.directory()){const e=i.split("/").slice(0,-1),s=hs+e.join("+")+"_"+ps.current(),a=await t(s);if(!a)return;ls(a,es)}else if(us.isIn.article()){rs.style.display="none",gs.style.display="block";const e=await async function(e){return s&&s.abort(),s=new AbortController,await fetch(e,{signal:s.signal}).then((async e=>{if(200!=e.status)throw e.status;const t=await e.text();return s=null,t})).catch((s=>{if("number"!=typeof s)return console.error(s),null;switch(s){case 404:return"# 404 Not Found";case 500:return"# 500 Internal Server Error";case DOMException:console.error(s);break;default:return console.log("Markdown request error: "+e),console.error(s),"# Unexpected request error"}}))}("./"+i);if(!e)return;Xe(gs,e)}else us.homepage();rs.setAttribute("data-is-root","static/"===i),rs.classList.remove("disabled");const a=e=>new URL(e).hash;e instanceof HashChangeEvent&&us.isIn.directory(a(e.oldURL))&&us.isIn.article(a(e.newURL))&&Be()}window.addEventListener("hashchange",os),window.addEventListener("load",os);const cs="static/",us={homepage(){location.hash=cs},open(e){location.hash+=e},jumpTo(e){location.hash=e},parent(){if(this.isIn.root()||this.isIn.newestPage())return cs;const e=location.hash.slice(1).split("/");if(this.isIn.directory())return e.slice(0,-2).join("/")+"/";if(this.isIn.article())return e.slice(0,-1).join("/")+"/";throw new Error("Unexpected hash: "+location.hash)},isIn:{root:()=>location.hash==="#"+cs,newestPage:()=>"#newest/"===location.hash,directory(e){const s=e||location.hash;return s.startsWith("#static")&&s.endsWith("/")},article(e){const s=e||location.hash;return s.startsWith("#static")&&s.endsWith(".md")}}};const ps=new class{#o=[1];current=()=>this.#o[this.length()-1];next=()=>this.#o[this.length()-1]+=1;prev=()=>this.#o[this.length()-1]-=1;jumpTo=e=>this.#o[this.length()-1]=Number(e);length=()=>this.#o.length;back(){this.#o.pop(),this.#o.length||this.#o.push(1)}open(){this.#o.push(1)}},ds=e=>B("button",B("span",e,{class:"underline-target"}),{class:"icon-btn underline-side"});class ms extends HTMLElement{#c={};constructor(){super(),this.#c.input=B("input","1",{type:"number",min:1,max:1}),this.#c.maxPage=B("span","1");const e=this.#c.prevBtn=ds(n("上一页","Prev")),s=this.#c.nextBtn=ds(n("下一页","Next"));e.id="prev-btn",e.classList.add("left"),s.id="next-btn",s.classList.add("right");const t=B("label",[this.#c.input,B("text","/"),this.#c.maxPage]);this.#u();for(const i of[e,t,s])this.appendChild(i)}#u(){this.#c.input.addEventListener("keydown",(e=>{if("Enter"!==e.key)return;const s=e.target.value;if(!/^\d+$/.test(s))return void(e.target.value=1);const t=Number(s);t>0&&t<=this.#c.input.max?(ps.jumpTo(t),os()):e.target.value=1})),this.#c.prevBtn.addEventListener("click",(()=>{ps.current()>0&&(ps.prev(),os())})),this.#c.nextBtn.addEventListener("click",(()=>{ps.current()<this.#c.input.max&&(ps.next(),os())}))}setPage(e,s){let t=!1,i=!1,a=!1;1===s?a=!0:(1===e&&(t=!0),e===s&&(i=!0)),this.#c.prevBtn.disabled=a||t,this.#c.nextBtn.disabled=a||i,this.#c.maxPage.textContent=s,this.#c.input.value=e,this.#c.input.max=s,this.classList.toggle("hidden",a)}}customElements.define("paging-view",ms);const bs=document.querySelector("main"),js=bs.querySelector("#previous-dir li"),fs=bs.querySelector("#article-list");js.addEventListener("click",(()=>{ps.back(),us.jumpTo(us.parent())})),fs.addEventListener("click",(e=>{const s=e.target;s!==fs&&(s.getAttribute("data-target-blog")?(ps.open(),us.jumpTo(s.getAttribute("data-target-blog"))):(s.innerText.endsWith("/")&&ps.open(),us.open(s.innerText)))})),g("dist/chunks/skeleton.min.css"),e.enableFab&&import("./chunks/fab.min.js"),e.enableCatalog&&import("./chunks/catalog.min.js");const ys=document.querySelector("#light-btn"),ws=document.querySelector("#dark-btn");ys.onkeydown=Fe(ys),ws.onkeydown=Fe(ws),window.addEventListener("popstate",(()=>{location.hash.endsWith("/")&&ps.back()})),window.addEventListener("beforeunload",(e=>{us.isIn.article()&&(sessionStorage.setItem("last-leave-page",location.hash),sessionStorage.setItem("last-leave-position",window.scrollY))}));new MutationObserver(Ze).observe(document.body,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("message",(e=>{if("null"!=e.origin)return;const{id:s,height:t}=e.data;document.getElementById(s).style.height=t+"px"})),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").catch((function(e){console.error("Registration failed with "+e)}));export{Be as a,B as b,Ue as c,d as e,g as i,n as l,us as p,Ve as s};
//# sourceMappingURL=index.min.js.map
