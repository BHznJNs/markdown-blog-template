import{al as e,be as a,U as r,ak as t,$ as o,aW as n,aZ as s,bf as i}from"./index.js";function l(e,a,r,t,o,n,s,i){var l=o-e,f=n-a,y=r-e,v=t-a,h=Math.sqrt(y*y+v*v),x=(l*(y/=h)+f*(v/=h))/h;i&&(x=Math.min(Math.max(x,0),1)),x*=h;var u=s[0]=e+x*y,m=s[1]=a+x*v;return Math.sqrt((u-o)*(u-o)+(m-n)*(m-n))}var f=new e,y=new e,v=new e,h=new e,x=new e,u=[],m=new e;function c(a,r){if(r<=180&&r>0){r=r/180*Math.PI,f.fromArray(a[0]),y.fromArray(a[1]),v.fromArray(a[2]),e.sub(h,f,y),e.sub(x,v,y);var t=h.len(),o=x.len();if(!(t<.001||o<.001)){h.scale(1/t),x.scale(1/o);var n=h.dot(x);if(Math.cos(r)<n){var s=l(y.x,y.y,v.x,v.y,f.x,f.y,u,!1);m.fromArray(u),m.scaleAndAdd(x,s/Math.tan(Math.PI-r));var i=v.x!==y.x?(m.x-y.x)/(v.x-y.x):(m.y-y.y)/(v.y-y.y);if(isNaN(i))return;i<0?e.copy(m,y):i>1&&e.copy(m,v),m.toArray(a[1])}}}}function g(a,r,t){if(t<=180&&t>0){t=t/180*Math.PI,f.fromArray(a[0]),y.fromArray(a[1]),v.fromArray(a[2]),e.sub(h,y,f),e.sub(x,v,y);var o=h.len(),n=x.len();if(!(o<.001||n<.001))if(h.scale(1/o),x.scale(1/n),h.dot(r)<Math.cos(t)){var s=l(y.x,y.y,v.x,v.y,f.x,f.y,u,!1);m.fromArray(u);var i=Math.PI/2,c=i+Math.acos(x.dot(r))-t;if(c>=i)e.copy(m,v);else{m.scaleAndAdd(x,s/Math.tan(Math.PI/2-c));var g=v.x!==y.x?(m.x-y.x)/(v.x-y.x):(m.y-y.y)/(v.y-y.y);if(isNaN(g))return;g<0?e.copy(m,y):g>1&&e.copy(m,v)}m.toArray(a[1])}}}function d(e,a,r,t){var o="normal"===r,n=o?e:e.ensureState(r);n.ignore=a;var s=t.get("smooth");s&&!0===s&&(s=.3),n.shape=n.shape||{},s>0&&(n.shape.smooth=s);var i=t.getModel("lineStyle").getLineStyle();o?e.useStyle(i):n.style=i}function M(e,a){var r=a.smooth,t=a.points;if(t)if(e.moveTo(t[0][0],t[0][1]),r>0&&t.length>=3){var o=s(t[0],t[1]),n=s(t[1],t[2]);if(!o||!n)return e.lineTo(t[1][0],t[1][1]),void e.lineTo(t[2][0],t[2][1]);var l=Math.min(o,n)*r,f=i([],t[1],t[0],l/o),y=i([],t[1],t[2],l/n),v=i([],f,y,.5);e.bezierCurveTo(f[0],f[1],f[0],f[1],v[0],v[1]),e.bezierCurveTo(y[0],y[1],y[0],y[1],t[2][0],t[2][1])}else for(var h=1;h<t.length;h++)e.lineTo(t[h][0],t[h][1])}function A(e,n,s){var i=e.getTextGuideLine(),l=e.getTextContent();if(l){for(var f=n.normal,y=f.get("show"),v=l.ignore,h=0;h<a.length;h++){var x=a[h],u=n[x],m="normal"===x;if(u){var c=u.get("show");if((m?v:r(l.states[x]&&l.states[x].ignore,v))||!r(c,y)){var g=m?i:i&&i.states[x];g&&(g.ignore=!0),i&&d(i,!0,x,u);continue}i||(i=new t,e.setTextGuideLine(i),m||!v&&y||d(i,!0,"normal",n.normal),e.stateProxy&&(i.stateProxy=e.stateProxy)),d(i,!1,x,u)}}if(i){o(i.style,s),i.style.fill=null;var A=f.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=A||!1,i.buildPath=M}}else i&&e.removeTextGuideLine()}function b(e,a){a=a||"labelLine";for(var r={normal:e.getModel(a)},t=0;t<n.length;t++){var o=n[t];r[o]=e.getModel([o,a])}return r}export{g as a,b as g,c as l,A as s};
