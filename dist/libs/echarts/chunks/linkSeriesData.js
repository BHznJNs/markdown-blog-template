import{X as a,e as t,x as n,Z as i,h as s,m as r,bP as u}from"./index.js";var e=a();function d(a){var s=a.mainData,r=a.datas;r||(r={main:s},a.datasAttr={main:"data"}),a.datas=a.mainData=null,m(s,r,a),t(r,(function(i){t(s.TRANSFERABLE_METHODS,(function(t){i.wrapMethod(t,n(o,a))}))})),s.wrapMethod("cloneShallow",n(l,a)),t(s.CHANGABLE_METHODS,(function(t){s.wrapMethod(t,n(c,a))})),i(r[s.dataType]===s)}function o(a,t){if(e(i=this).mainData===i){var n=s({},e(this).datas);n[this.dataType]=t,m(t,n,a)}else p(t,this.dataType,e(this).mainData,a);var i;return t}function c(a,t){return a.struct&&a.struct.update(),t}function l(a,n){return t(e(n).datas,(function(t,i){t!==n&&p(t.cloneShallow(),i,n,a)})),n}function f(a){var t=e(this).mainData;return null==a||null==t?t:e(t).datas[a]}function h(){var a=e(this).mainData;return null==a?[{data:a}]:r(u(e(a).datas),(function(t){return{type:t,data:e(a).datas[t]}}))}function m(a,n,i){e(a).datas={},t(n,(function(t,n){p(t,n,a,i)}))}function p(a,t,n,i){e(n).datas[t]=a,e(a).mainData=n,a.dataType=t,i.struct&&(a[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=a),a.getLinkedData=f,a.getLinkedDataAll=h}export{d as l};
