import{_ as t,dv as o,bX as n,dw as r,dx as e}from"./core.js";var a=Math.min,i=Math.max;function s(t,o){return isNaN(t)||isNaN(o)}function f(t,o,n,r,e,f,h,u,l){for(var c,v,p,d,y,b,m=n,M=0;M<r;M++){var N=o[2*m],g=o[2*m+1];if(m>=e||m<0)break;if(s(N,g)){if(l){m+=f;continue}break}if(m===n)t[f>0?"moveTo":"lineTo"](N,g),p=N,d=g;else{var P=N-c,k=g-v;if(P*P+k*k<.5){m+=f;continue}if(h>0){for(var x=m+f,w=o[2*x],C=o[2*x+1];w===N&&C===g&&M<r;)M++,m+=f,w=o[2*(x+=f)],C=o[2*x+1],P=(N=o[2*m])-c,k=(g=o[2*m+1])-v;var D=M+1;if(l)for(;s(w,C)&&D<r;)D++,w=o[2*(x+=f)],C=o[2*x+1];var S=.5,T=0,O=0,q=void 0,j=void 0;if(D>=r||s(w,C))y=N,b=g;else{T=w-c,O=C-v;var z=N-c,E=w-N,L=g-v,X=C-g,_=void 0,A=void 0;if("x"===u){var B=T>0?1:-1;y=N-B*(_=Math.abs(z))*h,b=g,q=N+B*(A=Math.abs(E))*h,j=g}else if("y"===u){var F=O>0?1:-1;y=N,b=g-F*(_=Math.abs(L))*h,q=N,j=g+F*(A=Math.abs(X))*h}else _=Math.sqrt(z*z+L*L),y=N-T*h*(1-(S=(A=Math.sqrt(E*E+X*X))/(A+_))),b=g-O*h*(1-S),j=g+O*h*S,q=a(q=N+T*h*S,i(w,N)),j=a(j,i(C,g)),q=i(q,a(w,N)),b=g-(O=(j=i(j,a(C,g)))-g)*_/A,y=a(y=N-(T=q-N)*_/A,i(c,N)),b=a(b,i(v,g)),q=N+(T=N-(y=i(y,a(c,N))))*A/_,j=g+(O=g-(b=i(b,a(v,g))))*A/_}t.bezierCurveTo(p,d,y,b,N,g),p=q,d=j}else t.lineTo(N,g)}c=N,v=g,m+=f}return M}var h=function(){this.smooth=0,this.smoothConstraint=!0},u=function(n){function a(t){var o=n.call(this,t)||this;return o.type="ec-polyline",o}return t(a,n),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new h},a.prototype.buildPath=function(t,o){var n=o.points,r=0,e=n.length/2;if(o.connectNulls){for(;e>0&&s(n[2*e-2],n[2*e-1]);e--);for(;r<e&&s(n[2*r],n[2*r+1]);r++);}for(;r<e;)r+=f(t,n,r,e,e,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},a.prototype.getPointOn=function(t,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var a,i,s=this.path.data,f=r.CMD,h="x"===n,u=[],l=0;l<s.length;){var c=void 0,v=void 0,p=void 0,d=void 0,y=void 0,b=void 0,m=void 0;switch(s[l++]){case f.M:a=s[l++],i=s[l++];break;case f.L:if(c=s[l++],v=s[l++],(m=h?(t-a)/(c-a):(t-i)/(v-i))<=1&&m>=0){var M=h?(v-i)*m+i:(c-a)*m+a;return h?[t,M]:[M,t]}a=c,i=v;break;case f.C:c=s[l++],v=s[l++],p=s[l++],d=s[l++],y=s[l++],b=s[l++];var N=h?o(a,c,p,y,t,u):o(i,v,d,b,t,u);if(N>0)for(var g=0;g<N;g++){var P=u[g];if(P<=1&&P>=0){M=h?e(i,v,d,b,P):e(a,c,p,y,P);return h?[t,M]:[M,t]}}a=y,i=b}}},a}(n),l=function(o){function n(){return null!==o&&o.apply(this,arguments)||this}return t(n,o),n}(h),c=function(o){function n(t){var n=o.call(this,t)||this;return n.type="ec-polygon",n}return t(n,o),n.prototype.getDefaultShape=function(){return new l},n.prototype.buildPath=function(t,o){var n=o.points,r=o.stackedOnPoints,e=0,a=n.length/2,i=o.smoothMonotone;if(o.connectNulls){for(;a>0&&s(n[2*a-2],n[2*a-1]);a--);for(;e<a&&s(n[2*e],n[2*e+1]);e++);}for(;e<a;){var h=f(t,n,e,a,a,1,o.smooth,i,o.connectNulls);f(t,r,e+h-1,h,a,-1,o.stackedOnSmooth,i,o.connectNulls),e+=h+1,t.closePath()}},n}(n);export{u as E,c as a};
